import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.dfcac6be.js";const h=JSON.parse('{"title":"Inverter Automation","description":"","frontmatter":{},"headers":[],"relativePath":"examples/a-mode.md","filePath":"examples/a-mode.md","lastUpdated":1695748579000}'),p={name:"examples/a-mode.md"},o=l(`<h1 id="inverter-automation" tabindex="-1">Inverter Automation <a class="header-anchor" href="#inverter-automation" aria-label="Permalink to &quot;Inverter Automation&quot;">​</a></h1><h2 id="load-limit" tabindex="-1">Load Limit <a class="header-anchor" href="#load-limit" aria-label="Permalink to &quot;Load Limit&quot;">​</a></h2><p>Ideally you do not want to discharge your batteries into non-essential loads like the geyser or heat pumps.</p><p>With <strong>Load Limit</strong> you can change the power export behavior from your inverter. The power from your inverter is a combination of PV and battery.</p><p>The options are:</p><ul><li><strong>Essentials</strong> - only supply power to the essentials (after the inverter)</li><li><strong>Allow Export</strong> - allow export to the grid. This can feed power to the non-essential loads and places no limit to feeding back into the grid.</li><li><strong>Zero Export</strong> - allow feed back to the grid side, or non-essentials. In addition it uses the Inverter&#39;s CT to limit power fed back toward the utility grid.</li></ul><p>This automation sets <code>load_limit</code> for daytime &amp; night-time behavior:</p><ul><li>During the day, the inverter (PV &amp; battery) can supply excess power to the non-essentials. No/zero export is allowed, since we cannot sell power to the grid.</li><li>During the evening, the inverter (PV &amp; battery) should only supply power to the Essentials. All non-essentials can use the utility grid if available.</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">SENSORS</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">load_limit</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">SENSORS</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">load_limit</span></span></code></pre></div><details class="details custom-block"><summary>Automations</summary><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SS Load Limit Essentials</span></span>
<span class="line"><span style="color:#85E89D;">trigger</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">platform</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">at</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;18:30:00&quot;</span></span>
<span class="line"><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: []</span></span>
<span class="line"><span style="color:#85E89D;">action</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">service</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select.select_option</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Essentials</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select.ss_load_limit</span></span>
<span class="line"><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">single</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SS Load Limit Essentials</span></span>
<span class="line"><span style="color:#22863A;">trigger</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">platform</span><span style="color:#24292E;">: </span><span style="color:#032F62;">time</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">at</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;18:30:00&quot;</span></span>
<span class="line"><span style="color:#22863A;">condition</span><span style="color:#24292E;">: []</span></span>
<span class="line"><span style="color:#22863A;">action</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">service</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select.select_option</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">option</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Essentials</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">target</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select.ss_load_limit</span></span>
<span class="line"><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#032F62;">single</span></span></code></pre></div><p>and</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SS Load Limit Zero Export</span></span>
<span class="line"><span style="color:#85E89D;">trigger</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">platform</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">at</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;07:00:00&quot;</span></span>
<span class="line"><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: []</span></span>
<span class="line"><span style="color:#85E89D;">action</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">service</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select.select_option</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Zero Export</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">target</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select.ss_load_limit</span></span>
<span class="line"><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">single</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SS Load Limit Zero Export</span></span>
<span class="line"><span style="color:#22863A;">trigger</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">platform</span><span style="color:#24292E;">: </span><span style="color:#032F62;">time</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">at</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;07:00:00&quot;</span></span>
<span class="line"><span style="color:#22863A;">condition</span><span style="color:#24292E;">: []</span></span>
<span class="line"><span style="color:#22863A;">action</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">service</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select.select_option</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">option</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Zero Export</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">target</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select.ss_load_limit</span></span>
<span class="line"><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#032F62;">single</span></span></code></pre></div></details><h2 id="detecting-power-failures-load-shedding" tabindex="-1">Detecting power failures / Load shedding <a class="header-anchor" href="#detecting-power-failures-load-shedding" aria-label="Permalink to &quot;Detecting power failures / Load shedding&quot;">​</a></h2><p>This can be achieved with any of the following sensors</p><ul><li><code>Grid connected status</code></li><li><code>Grid frequency</code> drops below a certain value</li><li><code>Grid voltage</code> drops below a certain value</li></ul><p>The example automation below creates a binary_sensor from the grid frequency and sends out notification on power failure and the duration of the failure (with some sane back-offs). It serves as a reminder that load shadding is a reality.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">SENSORS</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">grid_frequency</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">SENSORS</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">grid_frequency</span></span></code></pre></div><details class="details custom-block"><summary>Config package - <code>/config/packages/alert.yaml</code></summary><p>Refer to <a href="./overview#config-packages">config packages</a> for help on how to add this.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">binary_sensor</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Load shedding</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">state</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;{{ states(&#39;sensor.ss_grid_frequency&#39;) | default (50) | int(0) &lt; 40  }}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">alert</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">load_shed</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Load shedding&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">message</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;The power is off for - {{ relative_time(states.binary_sensor.load_shedding.last_changed) }}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">done_message</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;The power is back on&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">binary_sensor.load_shedding</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">repeat</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#79B8FF;">30</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#79B8FF;">60</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#79B8FF;">120</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">can_acknowledge</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Optional, default is true</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">skip_first</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Optional, false is the default</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">notifiers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">mobile_app_johann_iphone</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">template</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">binary_sensor</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Load shedding</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">state</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;{{ states(&#39;sensor.ss_grid_frequency&#39;) | default (50) | int(0) &lt; 40  }}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">alert</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">load_shed</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Load shedding&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">message</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;The power is off for - {{ relative_time(states.binary_sensor.load_shedding.last_changed) }}&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">done_message</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;The power is back on&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">binary_sensor.load_shedding</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">repeat</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#005CC5;">30</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#005CC5;">60</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#005CC5;">120</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">can_acknowledge</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Optional, default is true</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">skip_first</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Optional, false is the default</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">notifiers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">mobile_app_johann_iphone</span></span></code></pre></div></details><h2 id="battery-charging-to-optimise-time-of-use-tariffs" tabindex="-1">Battery charging to optimise Time-of-Use tariffs <a class="header-anchor" href="#battery-charging-to-optimise-time-of-use-tariffs" aria-label="Permalink to &quot;Battery charging to optimise Time-of-Use tariffs&quot;">​</a></h2><p>Example of automation to economically optimize the battery: In Spain, electrical surpluses are better paid early in the day, the inverter usually charges the battery at that time so there are no surpluses. Later, when they are already charged, the purchase price of surpluses is usually much lower, which is why it occurred to us in the <a href="https://t.me/pos_turbo_energy" target="_blank" rel="noreferrer">&quot;Posesos del Turbo...&quot;</a> Telegram group in Spain to make an automation by lowering the maximum charging power of the battery to 1A during the first hours of the day to force the sale of surpluses at those hours, and then, for example from 12 or 1 pm, when the sale price drops, raise the charging power to its normal level to charge it before sunset. This will depend a lot on the number of plates, batteries and hours of light that each one has naturally.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">SENSORS</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">battery_max_charge_current</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">SENSORS</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">battery_max_charge_current</span></span></code></pre></div><details class="details custom-block"><summary>Automation</summary><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Bajar potencia de carga</span></span>
<span class="line"><span style="color:#85E89D;">description</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Inject surpluses</span></span>
<span class="line"><span style="color:#85E89D;">trigger</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">platform</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">at</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;09:00:00&quot;</span></span>
<span class="line"><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: []</span></span>
<span class="line"><span style="color:#85E89D;">action</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">device_id</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;">#####################</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">domain</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">number</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">number.battery_max_charge_current</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">set_value</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">value</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">single</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Bajar potencia de carga</span></span>
<span class="line"><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Inject surpluses</span></span>
<span class="line"><span style="color:#22863A;">trigger</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">platform</span><span style="color:#24292E;">: </span><span style="color:#032F62;">time</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">at</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;09:00:00&quot;</span></span>
<span class="line"><span style="color:#22863A;">condition</span><span style="color:#24292E;">: []</span></span>
<span class="line"><span style="color:#22863A;">action</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">device_id</span><span style="color:#24292E;">: </span><span style="color:#6A737D;">#####################</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">domain</span><span style="color:#24292E;">: </span><span style="color:#032F62;">number</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">number.battery_max_charge_current</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">set_value</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">value</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#032F62;">single</span></span></code></pre></div><p>and</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Subir potencia de carga</span></span>
<span class="line"><span style="color:#85E89D;">description</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Cargar bateria</span></span>
<span class="line"><span style="color:#85E89D;">trigger</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">platform</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">at</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;13:00:00&quot;</span></span>
<span class="line"><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: []</span></span>
<span class="line"><span style="color:#85E89D;">action</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">device_id</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;">######################</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">domain</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">number</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">number.battery_max_charge_current</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">set_value</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">value</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">75</span></span>
<span class="line"><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">single</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Subir potencia de carga</span></span>
<span class="line"><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Cargar bateria</span></span>
<span class="line"><span style="color:#22863A;">trigger</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">platform</span><span style="color:#24292E;">: </span><span style="color:#032F62;">time</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">at</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;13:00:00&quot;</span></span>
<span class="line"><span style="color:#22863A;">condition</span><span style="color:#24292E;">: []</span></span>
<span class="line"><span style="color:#22863A;">action</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">device_id</span><span style="color:#24292E;">: </span><span style="color:#6A737D;">######################</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">domain</span><span style="color:#24292E;">: </span><span style="color:#032F62;">number</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">number.battery_max_charge_current</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">set_value</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">value</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">75</span></span>
<span class="line"><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#032F62;">single</span></span></code></pre></div></details><h2 id="charge-the-battery-in-case-of-low-forecast" tabindex="-1">Charge the battery in case of low forecast <a class="header-anchor" href="#charge-the-battery-in-case-of-low-forecast" aria-label="Permalink to &quot;Charge the battery in case of low forecast&quot;">​</a></h2><p>Example of automation to Charge the battery in the program 1 time in the months of March and September if the expected production of the following day is going to be less than 10kwh as long as the price in that hourly period is less than 0.05cts. Using the Forecast.Solar integration.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">SENSORS</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">prog1_mode</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">SENSORS</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">prog1_mode</span></span></code></pre></div><details class="details custom-block"><summary>Automations</summary><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Cargar bateria noche</span></span>
<span class="line"><span style="color:#85E89D;">description</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#85E89D;">trigger</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">platform</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">at</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;23:55:00&quot;</span></span>
<span class="line"><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">template</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">value_template</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;{{ now().month in [3, 9] }} &quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Marzo y Septiembre &quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">numeric_state</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">sensor.energy_production_tomorrow</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">below</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">15</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">condition</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">numeric_state</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">sensor.esios_pvpc</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">attribute</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">price_next_day_00h</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">below</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.05</span></span>
<span class="line"><span style="color:#85E89D;">action</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">device_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">1d0794ae215d5051bf06926b63209edf</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">domain</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">entity_id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select.prog1_mode</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">select_option</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Charge</span></span>
<span class="line"><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">single</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Cargar bateria noche</span></span>
<span class="line"><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#22863A;">trigger</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">platform</span><span style="color:#24292E;">: </span><span style="color:#032F62;">time</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">at</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;23:55:00&quot;</span></span>
<span class="line"><span style="color:#22863A;">condition</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">condition</span><span style="color:#24292E;">: </span><span style="color:#032F62;">template</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">value_template</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;{{ now().month in [3, 9] }} &quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Marzo y Septiembre &quot;</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">condition</span><span style="color:#24292E;">: </span><span style="color:#032F62;">numeric_state</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">sensor.energy_production_tomorrow</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">below</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">15</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">condition</span><span style="color:#24292E;">: </span><span style="color:#032F62;">numeric_state</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">sensor.esios_pvpc</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">attribute</span><span style="color:#24292E;">: </span><span style="color:#032F62;">price_next_day_00h</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">below</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.05</span></span>
<span class="line"><span style="color:#22863A;">action</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">device_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">1d0794ae215d5051bf06926b63209edf</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">domain</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">entity_id</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select.prog1_mode</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">select_option</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">option</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Charge</span></span>
<span class="line"><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#032F62;">single</span></span></code></pre></div></details>`,24),e=[o];function t(c,r,i,E,y,d){return a(),n("div",null,e)}const m=s(p,[["render",t]]);export{h as __pageData,m as default};
